<?xml version="1.0" encoding="utf-8"?>
<doctrine-mapping xmlns="http://doctrine-project.org/schemas/orm/doctrine-mapping" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://doctrine-project.org/schemas/orm/doctrine-mapping http://doctrine-project.org/schemas/orm/doctrine-mapping.xsd" xmlns:gedmo="http://gediminasm.org/schemas/orm/doctrine-extensions-mapping">

    <entity repository-class="Undine\Repository\SiteRepository" name="Undine\Model\Site" change-tracking-policy="DEFERRED_EXPLICIT">

        <id name="id" type="integer">
            <generator strategy="AUTO"/>
        </id>

        <field name="url" type="uri" length="300"/>
        <field name="privateKey" type="string" length="1750"/>
        <field name="publicKey" type="string" length="500"/>
        <field name="createdAt" type="datetime">
            <gedmo:timestampable on="create"/>
        </field>

        <!-- State fields are considered "user input". It's hard to determine validation constraints on most of them,
             (even though there are some) so they are all nullable and up to the default 255 characters. -->
        <field name="phpVersion" type="string" nullable="true"/>
        <field name="phpVersionId" type="integer" nullable="true"/>
        <field name="databaseDriver" type="string" nullable="true"/>
        <field name="databaseDriverVersion" type="string" nullable="true"/>
        <field name="databaseTablePrefix" type="string" nullable="true"/>
        <field name="memoryLimit" type="integer" nullable="true"/>
        <field name="processArchitecture" type="integer" nullable="true"/>
        <field name="internalIp" type="string" nullable="true"/>
        <field name="uname" type="string" nullable="true"/>
        <field name="hostname" type="string" nullable="true"/>
        <field name="os" type="string" nullable="true"/>
        <field name="windows" type="boolean" nullable="true"/>
        <field name="cronKey" type="string" nullable="true"/>
        <field name="cronLastRunAt" type="datetime" nullable="true"/>
        <field name="siteName" type="string" nullable="true"/>
        <field name="siteMail" type="string" nullable="true"/>
        <field name="siteKey" type="string" nullable="true"/>
        <field name="siteRoot" type="string" nullable="true"/>
        <field name="drupalRoot" type="string" nullable="true"/>
        <field name="drupalVersion" type="string" nullable="true"/>
        <field name="updateLastCheckAt" type="datetime" nullable="true"/>
        <field name="timezone" type="timezone" nullable="true"/>
        <field name="systemChecksum" type="string" nullable="true"/>
        <!-- End of state fields. -->

        <field name="deletedAt" type="datetime" nullable="true"/>
        <gedmo:soft-deleteable field-name="deletedAt" time-aware="false"/>

        <many-to-one target-entity="Undine\Model\User" field="user" inversed-by="sites">
        </many-to-one>

    </entity>

</doctrine-mapping>
